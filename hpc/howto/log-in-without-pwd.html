<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>log-in-without-pwd ‚Äì UCSF Wynton HPC Cluster</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-98e2a9b0d4696fd01dd9970aef6a652a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Create UCSF banner element
  var banner = document.createElement('div');
  banner.className = 'top-banner logo';
  banner.innerHTML = `
    <div class="inner">
      <div>
        <div class="logo"></div>
        <a class="logotype" href="https://www.ucsf.edu/">
          <span>University of California San Francisco</span>
        </a>
      </div>
      <div class="nav">
        <ul class="top-banner-menu">
          <li><a href="https://www.ucsf.edu/about">About UCSF</a></li>
          <li><a href="https://www.ucsf.edu/search">Search UCSF</a></li>
        </ul>
      </div>
    </div>
  `;
  
  // Insert banner before navbar
  var body = document.body;
  var navbar = document.querySelector('.navbar');
  if (navbar && navbar.parentNode) {
    navbar.parentNode.insertBefore(banner, navbar);
  } else {
    body.insertBefore(banner, body.firstChild);
  }
});
</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Get the current page path
  var path = window.location.pathname;
  
  // Convert from .html to .md and adjust path
  // Remove /hpc/ from start if present for GitHub path
  var githubPath = path.replace(/\.html$/, '.md');
  if (githubPath.endsWith('/')) {
    githubPath += 'index.md';
  }
  
  // Create the edit link
  var repoUrl = 'https://github.com/ucsf-wynton/wynton-website-hpc';
  var editUrl = repoUrl + '/tree/master/docs' + githubPath;
  
  // Find the footer and add our custom links
  var footer = document.querySelector('.nav-footer');
  if (footer) {
    var rightDiv = footer.querySelector('.nav-footer-right');
    if (!rightDiv) {
      rightDiv = document.createElement('div');
      rightDiv.className = 'nav-footer-right';
      footer.appendChild(rightDiv);
    }
    
    rightDiv.innerHTML = '<ul class="footer-items list-unstyled">' +
      '<li class="nav-item">' +
      '<a class="nav-link" href="' + editUrl + '">' +
      '<i class="bi bi-pencil-square"></i> Edit this page' +
      '</a></li>' +
      '<li class="nav-item">' +
      '<a class="nav-link" href="' + repoUrl + '/issues/new">' +
      'Report an issue' +
      '</a></li>' +
      '</ul>';
  }
});
</script>


<link rel="stylesheet" href="../../hpc/assets/css/ucsf-banners.css">
<link rel="stylesheet" href="../../hpc/assets/css/bootstrap.min.css">
<link rel="stylesheet" href="../../hpc/assets/css/this_site.css">
<link rel="stylesheet" href="../../hpc/assets/css/broadcast.css">
<link rel="stylesheet" href="../../hpc/assets/css/checkbox-toggle.css">
<link rel="stylesheet" href="../../hpc/assets/css/docsearch.css">
<link rel="stylesheet" href="../../hpc/assets/css/quarto-customizations.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../hpc/assets/ico/favicon.ico" alt="" class="navbar-logo light-content">
    <img src="../../hpc/assets/ico/favicon.ico" alt="" class="navbar-logo dark-content">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">UCSF Wynton HPC Cluster</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../hpc/status/index.html"> 
<span class="menu-text">Status</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-get-started" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Get Started</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-get-started">    
        <li>
    <a class="dropdown-item" href="../../hpc/get-started/access-cluster.html">
 <span class="dropdown-text">1. Login &amp; Logout</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/get-started/development-prototyping.html">
 <span class="dropdown-text">2. Development / Prototyping</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/get-started/hello-world-job.html">
 <span class="dropdown-text">3. ‚ÄòHello World‚Äô Job</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/get-started/good-practices.html">
 <span class="dropdown-text">4. Good Practices</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/get-started/duo-signup.html">
 <span class="dropdown-text">5. 2FA Registration</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/get-started/protected-quickstart.html">
 <span class="dropdown-text">6. Wynton Protected Quickstart</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-software" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Software</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-software">    
        <li>
    <a class="dropdown-item" href="../../hpc/software/core-software.html">
 <span class="dropdown-text">Core Software</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/software/scl.html">
 <span class="dropdown-text">Software Collections (SCL)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/software/software-modules.html">
 <span class="dropdown-text">Software Modules</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/software/software-repositories.html">
 <span class="dropdown-text">Software Repositories</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/software/apptainer.html">
 <span class="dropdown-text">Linux Containers (Apptainer/Singularity)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/software/sbgrid.html">
 <span class="dropdown-text">SBGrid Software (restricted access)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/software/missing-software.html">
 <span class="dropdown-text">Missing Software?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/software/rocky-8-linux.html">
 <span class="dropdown-text">Migration to Rocky 8 Linux (Nov 2023)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-sge" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">SGE</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-sge">    
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/submit-jobs.html">
 <span class="dropdown-text">Submit Jobs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/list-jobs.html">
 <span class="dropdown-text">List Jobs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/kill-jobs.html">
 <span class="dropdown-text">Kill Jobs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/job-summary.html">
 <span class="dropdown-text">Job Summary</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/envvars.html">
 <span class="dropdown-text">Useful Env. Variables</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/using-local-scratch.html">
 <span class="dropdown-text">Use Local Scratch</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/queues.html">
 <span class="dropdown-text">Available Queues</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/email-notifications.html">
 <span class="dropdown-text">Job Email Notifications</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/gpu.html">
 <span class="dropdown-text">GPU Scheduling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/advanced-usage.html">
 <span class="dropdown-text">Advanced Usage</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-file-transfers" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">File Transfers</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-file-transfers">    
        <li>
    <a class="dropdown-item" href="../../hpc/transfers/files-and-directories.html">
 <span class="dropdown-text">Secure Copy File Transfers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/transfers/globus.html">
 <span class="dropdown-text">Globus File Transfers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/transfers/globus-sharing.html">
 <span class="dropdown-text">Globus File Sharing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/transfers/ucsf-box.html">
 <span class="dropdown-text">UCSF Box</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/transfers/dos2unix.html">
 <span class="dropdown-text">Windows-Unix File Transfers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/transfers/rclone.html">
 <span class="dropdown-text">rclone (mount Wynton file system locally)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-how-to" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">How To</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-how-to">    
        <li>
    <a class="dropdown-item" href="../../hpc/howto/matlab.html">
 <span class="dropdown-text">Work with MATLAB</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/python.html">
 <span class="dropdown-text">Work with Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/jupyter.html">
 <span class="dropdown-text">Work with Jupyter Notebook</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/r.html">
 <span class="dropdown-text">Work with R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/rstudio.html">
 <span class="dropdown-text">Work with RStudio</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/conda.html">
 <span class="dropdown-text">Work with Conda</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/conda-stage.html">
 <span class="dropdown-text">Stage Conda Environment to Local Disk</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/install-from-source.html">
 <span class="dropdown-text">Install Software from Source</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/storage-size.html">
 <span class="dropdown-text">File Sizes and Disk Quotas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/group-quota.html">
 <span class="dropdown-text">Adjust Group Disk Quota</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/find-files.html">
 <span class="dropdown-text">Find Files</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/log-in-without-pwd.html">
 <span class="dropdown-text">Log in without Password</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/change-pwd.html">
 <span class="dropdown-text">Change &amp; Verify Password</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/gui-x11fwd.html">
 <span class="dropdown-text">GUIs (X2Go &amp; X11)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/jupyterhub.html">
 <span class="dropdown-text">JupyterHub Server (DISCONTINUED)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-support" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Support</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-support">    
        <li>
    <a class="dropdown-item" href="../../hpc/support/index.html">
 <span class="dropdown-text">Support Channels</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/support/faq.html">
 <span class="dropdown-text">Frequently Asked Questions</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-about" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">About</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-about">    
        <li>
    <a class="dropdown-item" href="../../hpc/about/specs.html">
 <span class="dropdown-text">Specifications</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/about/gpus.html">
 <span class="dropdown-text">Available GPUs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/about/news.html">
 <span class="dropdown-text">News</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/about/pricing-storage.html">
 <span class="dropdown-text">Pricing: Extra Storage</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/about/pricing-compute.html">
 <span class="dropdown-text">Pricing: Extra Compute (CPU &amp; GPU)</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../../hpc/about/wynton-protected.html">
 <span class="dropdown-text">Wynton Protected (P3 Data)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/about/join.html">
 <span class="dropdown-text">Join ‚ô°</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/about/shares.html">
 <span class="dropdown-text">Contributing Member Shares</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../../hpc/about/governance.html">
 <span class="dropdown-text">Governance</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/about/user-agreement.html">
 <span class="dropdown-text">User Agreement</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/about/citation.html">
 <span class="dropdown-text">How to Cite</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../../hpc/about/contact.html">
 <span class="dropdown-text">Contact</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>




<section id="log-in-without-password" class="level1">
<h1>Log in without Password</h1>
<p>These instructions explains how to set up your local computer such that you can log into the compute cluster, or copy files to and from the cluster, without having to enter your password each time.</p>
<section id="instruction" class="level2">
<h2 class="anchored" data-anchor-id="instruction">Instruction</h2>
<p>In summary, the steps are:</p>
<ol type="1">
<li>On your local computer: Generate private-public key pair</li>
<li>On the cluster: Add public key</li>
<li>On your local computer: Verify password-free access</li>
<li>On your local computer: Edit <code>~/.ssh/config</code> for setting default SSH options per remote host/server</li>
</ol>
<p>Expected time: &lt; 10 minutes.</p>
<div class="alert alert-info" role="alert">
<p>These instructions are for the <code>ssh</code> client available on Linux, macOS, and MS Windows. If you use the <a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/">PuTTY</a> SSH client, the overall idea is similar. Please consult the PuTTY user forums for further instructions.</p>
</div>
<section id="step-1-generate-private-public-ssh-key-pair-on-local-machine" class="level3">
<h3 class="anchored" data-anchor-id="step-1-generate-private-public-ssh-key-pair-on-local-machine">Step 1: Generate private-public SSH key pair (on local machine)</h3>
<p>Here, we will generate a private-public SSH key pair (stored in two files) that is unique for accessing the cluster:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">{local}$</span> mkdir ~/.ssh</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">{local}$</span> chmod u=rwx,go= ~/.ssh</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="ex">{local}$</span> ssh-keygen <span class="at">-m</span> PEM <span class="at">-f</span> ~/.ssh/laptop_to_{{ site.cluster.nickname <span class="kw">|</span> <span class="ex">downcase</span> }}</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Generating</span> public/private rsa key pair.</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Created</span> directory <span class="st">'/home/alice/.ssh'</span>.</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="ex">Enter</span> passphrase <span class="er">(</span><span class="ex">empty</span> for no passphrase<span class="kw">)</span><span class="bu">:</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="ex">Enter</span> same passphrase again:</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="ex">Your</span> identification has been saved in /home/alice/.ssh/laptop_to_{{ site.cluster.nickname <span class="kw">|</span> <span class="ex">downcase</span> }}</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="ex">Your</span> public key has been saved in /home/alice/.ssh/laptop_to_{{ site.cluster.nickname <span class="kw">|</span> <span class="ex">downcase</span> }}.pub.</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="ex">he</span> key fingerprint is:</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="ex">SHA256:2MpJL+I6rQbfhvLZAyC6fa6Y40yZhwG+FYOiHCQ94Fw</span> alice@my_laptop</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="ex">The</span> key<span class="dt">\'</span>s randomart image is:</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="ex">+---[RSA</span> 2048]----+</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span><span class="ex">o+</span> E             <span class="kw">|</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span><span class="ex">=</span> =              <span class="kw">|</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span><span class="va">o</span><span class="op">=</span> <span class="ex">+</span>             <span class="kw">|</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span><span class="ex">O</span> . o  o         <span class="kw">|</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span><span class="ex">+=</span> .  o S        <span class="kw">|</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span><span class="ex">o</span> O  o +         <span class="kw">|</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span> <span class="ex">@</span> <span class="pp">*</span>. = .        <span class="kw">|</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span><span class="ex">*oB+*.</span> .         <span class="kw">|</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span><span class="ex">+B*O+.</span>           <span class="kw">|</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="ex">+----[SHA256]-----+</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="alert alert-info" role="alert">
<p>If you specify a passphrase, your local operating system will ask for the passphrase <em>the first time</em> you try to log in to the cluster. All other login attempts will be passphrase (and password) free (until you reboot the machine). This should work out of the box on macOS and most Linux distributions - on MS Windows you need to set up your SSH agent manually (or use an empty passphrase). If you choose to use an empty passphrase, make sure that your machine is safe and uses a highly secure local login password.</p>
</div>
<div class="alert alert-danger" role="alert">
<p><span>üõë</span> The public key you can safely share with the world, but <strong>treat your <em>private key</em> as a password; anyone who has access to it will have access to your account if it does not have a passphrase!</strong></p>
</div>
</section>
</section>
<section id="step-2-add-the-public-ssh-key-on-cluster" class="level2">
<h2 class="anchored" data-anchor-id="step-2-add-the-public-ssh-key-on-cluster">Step 2: Add the public SSH key (on cluster)</h2>
<p>Next, we will set up the cluster to recognize your public SSH key. Assuming your cluster user name is <code>alice</code> in the cluster, the goal is to append the content of the <em>public</em> key file to <code>~/.ssh/authorized_keys</code> on the cluster. There are two ways this can be done.</p>
<p><strong>Alternative 1</strong>: If you have the <code>ssh-copy-id</code> tool installed on your local computer, then use:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">{local}$</span> ssh-copy-id <span class="at">-i</span> ~/.ssh/laptop_to_{{ site.cluster.nickname <span class="kw">|</span> <span class="ex">downcase</span> }}.pub alice@log2.wynton.ucsf.edu</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/bin/ssh-copy-id:</span> INFO: Source of key<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="ex">to</span> be installed: <span class="st">"/wynton/home/boblab/alice/.ssh/laptop_to_{{ site.cluster.nickname | downcase }}.pub"</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/bin/ssh-copy-id:</span> INFO: attempting to log in with the new key<span class="er">(</span><span class="ex">s</span><span class="kw">)</span><span class="ex">,</span> to filter out any that are already installed</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/bin/ssh-copy-id:</span> INFO: 1 key<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="ex">remain</span> to be installed <span class="at">--</span> if you are prompted now it is to install the new keys</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="ex">alice@log2.wynton.ucsf.edu:s</span> password: </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="ex">Number</span> of key<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="ex">added:</span> 1</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="ex">Now</span> try logging into the machine, with:   <span class="st">"ssh 'alice@log2.wynton.ucsf.edu'"</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="ex">and</span> check to make sure that only the key<span class="er">(</span><span class="ex">s</span><span class="kw">)</span> <span class="ex">you</span> wanted were added.</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="ex">{local}$</span> </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Done.</p>
<p><strong>Alternative 2</strong>: If you don‚Äôt have <code>ssh-copy-id</code>, you will have to copy the <em>public</em> key file over to the cluster, log in, append it to the target file, and validate file permissions. Assuming you already have a <code>~/.ssh</code> folder on the cluster, first copy the public key file to <code>~/.ssh</code> on the cluster:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">{local}$</span> scp ~/.ssh/laptop_to_{{ site.cluster.nickname <span class="kw">|</span> <span class="ex">downcase</span> }}.pub alice@log2.wynton.ucsf.edu:.ssh/</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">laptop_to_{{</span> site.cluster.nickname <span class="kw">|</span> <span class="ex">downcase</span> }}.pub           100%  390     0.4KB/s   00:00</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Then, log into the cluster (still using a password) and <em>append</em> the public key to <code>~/.ssh/authorized_keys</code>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">{local}$</span> ssh <span class="at">-o</span> PreferredAuthentications=keyboard-interactive,password alice@log2.wynton.ucsf.edu</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">alice1@169.230.79.12\'s</span> password: XXXXXXXXXXXXXXXXXXX</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="ex">[alice@log2</span> ~]$ cd .ssh</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="ex">[alice@log2</span> .ssh]$ cat laptop_to_{{ site.cluster.nickname <span class="kw">|</span> <span class="ex">downcase</span> }}.pub <span class="op">&gt;&gt;</span> authorized_keys</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Finally, make sure that <code>~/.ssh/authorized_keys</code> on Wynton is only accessible to you (otherwise that file will be completely ignored by SSH);</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[alice@log2</span> .ssh]$ chmod u=rw,go= ~/.ssh/authorized_keys</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">[alice@log2</span> .ssh]$ stat <span class="at">--format</span><span class="op">=</span>%A ~/.ssh/authorized_keys</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="ex">-rw-------</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Lastly, log out from the cluster:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[alice@log2</span> .ssh]$ exit</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">{local}$</span> </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Done.</p>
</section>
<section id="step-3-test" class="level2">
<h2 class="anchored" data-anchor-id="step-3-test">Step 3: Test</h2>
<p>You should now be able to log into the cluster from your local computer without having to enter the cluster password. Try the following:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">{local}$</span> ssh <span class="at">-o</span> PreferredAuthentications=publickey,keyboard-interactive <span class="at">-o</span> IdentitiesOnly=yes <span class="at">-i</span> ~/.ssh/laptop_to_{{ site.cluster.nickname <span class="kw">|</span> <span class="ex">downcase</span> }} alice@log2.wynton.ucsf.edu</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">[alice@log2</span> ~]$ </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>You will be asked to enter your <em>passphrase</em>, if you chose one above.</p>
<p>If you get</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Permission</span> denied <span class="er">(</span><span class="ex">publickey,gssapi-keyex,gssapi-with-mic,keyboard-interactive,password</span><span class="kw">)</span><span class="bu">.</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>then make sure you use the correct user name and that the file permissions on <code>~/.ssh</code> are correct on your <em>local</em> machine. See Appendix Section ‚Äò<a href="#fix-non-secure-file-permission-on-.ssh">Fix non-secure file permission on ~/.ssh/</a>‚Äô for instructions. If it still does not work, check the <code>~/.ssh</code> permissions on the cluster too.</p>
<p>The reason why we use <code>-o PreferredAuthentications=publickey,keyboard-interactive -o IdentitiesOnly=yes</code> in the above test, is so that we can make sure no alternative login mechanisms than our SSH keypair are in play. After having validated the above, these options can be dropped and you can now use:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">{local}$</span> ssh <span class="at">-i</span> ~/.ssh/laptop_to_{{ site.cluster.nickname <span class="kw">|</span> <span class="ex">downcase</span> }} alice@log2.wynton.ucsf.edu</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">[alice@log2</span> ~]$ </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="step-4-avoid-having-to-specify-ssh-option--i-on-local-machine" class="level2">
<h2 class="anchored" data-anchor-id="step-4-avoid-having-to-specify-ssh-option--i-on-local-machine">Step 4: Avoid having to specify SSH option <code>-i</code> (on local machine)</h2>
<p>It is rather tedious having to specify what private key file to use (<code>-i ~/.ssh/laptop_to_{{ site.cluster.nickname | downcase }}</code>) each time you use SSH. As a last step, we will set the default options for <code>alice@log2.wynton.ucsf.edu</code>. On your local machine, add the following directive to <code>~/.ssh/config</code> (if you don‚Äôt have the file, create it):</p>
<pre class="lang-none"><code>Host *.wynton.ucsf.edu
  User alice
  IdentityFile ~/.ssh/laptop_to_{{ site.cluster.nickname | downcase }}</code></pre>
<p>With all of the above, you should now be able to log in to the cluster using:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">{local}$</span> ssh log2.wynton.ucsf.edu</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="ex">[alice@log2</span> ~]$ </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Because we use globbing for <code>Host</code> in the above SSH config directive, it applies to SSH connections for <em>all</em> Wynton connections.</p>
</section>
<section id="appendix" class="level2">
<h2 class="anchored" data-anchor-id="appendix">Appendix</h2>
<section id="fix-non-secure-file-permission-on-.ssh" class="level3">
<h3 class="anchored" data-anchor-id="fix-non-secure-file-permission-on-.ssh">Fix non-secure file permission on ~/.ssh/</h3>
<div class="alert alert-info" role="alert">
<p>These instructions are only for Linux and macOS.</p>
</div>
<p><em>On your local machine</em>, open a terminal, and run</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">{local}$</span> stat <span class="at">--format</span><span class="op">=</span>%A ~/.ssh</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="ex">drwx------</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The <code>stat</code> output consists of four parts: <code>d</code> tells us it is a directory, <code>rw-</code> specifies the permission for the user (<code>u</code>), and the following <code>---</code> and <code>---</code> specifies the permissions for the group (<code>g</code>), and all others (<code>o</code>), respectively.</p>
<p>If the reported permission for group and others are anything but <code>---</code>, then <code>scp</code> and <code>ssh</code> don‚Äôt trust the folder and will silently ignore your SSH key pair. To secure the folder, do:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">{local}$</span> chmod u=rwx,go= ~/.ssh</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="ex">{local}$</span> stat <span class="at">--format</span><span class="op">=</span>%A ~/.ssh</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="ex">drwx------</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Explanation:</em> The above <code>chmod</code> settings specify that you as a user (<code>u</code>) have read (<code>r</code>) and write (<code>w</code>) permissions for this directory. In addition, you have executable (<code>x</code>) permission, which also means you can set it as your working directory. Continuing, the settings also specify that other users in your group (<code>g</code>) as well as all other (<code>o</code>) users on the system have no access at all (empty permission).</p>
</section>
<section id="automatically-connect-with-x11-forwarding" class="level3">
<h3 class="anchored" data-anchor-id="automatically-connect-with-x11-forwarding">Automatically connect with X11 Forwarding</h3>
<p>If you often use <code>ssh -X</code> when connecting to the cluster, that is, you often use X11 Forwarding for remote graphics etc., then you can make this the default by adding <code>ForwardX11 yes</code> to the above <code>Host *.wynton.ucsf.edu</code> in <code>~/.ssh/config</code> on your local computer:</p>
<pre class="lang-none"><code>Host *.wynton.ucsf.edu
  User alice
  IdentityFile ~/.ssh/laptop_to_{{ site.cluster.nickname | downcase }}
  ForwardX11 yes
  Compression yes</code></pre>
<p>We also add <code>Compression yes</code>, which corresponds to <code>ssh -C</code>, to <a href="../../hpc/howto/gui-x11fwd.html#log-into-the-cluster-with-x11-forwarding">improve the X11 Forwarding performance</a>.</p>
<p>If you use <code>ssh -Y</code>, which you might have to do if you are on macOS, then add also <code>ForwardX11Trusted yes</code>:</p>
<pre class="lang-none"><code>  ForwardX11 yes
  ForwardX11Trusted yes
  Compression yes</code></pre>
</section>
<section id="connect-directly-to-a-development-node" class="level3">
<h3 class="anchored" data-anchor-id="connect-directly-to-a-development-node">Connect directly to a development node</h3>
<p>The login nodes should only be used for light-weight tasks such as submitting job scripts, checking that the status of existing jobs, and doing basic file manipulations. We should do all other type of tasks on development nodes, do avoid risk clogging up the login nodes. To avoid having to do two manual SSH steps, one to a login node followed immediately by one to the development, we can set up another SSH configuration directive that does both in one SSH call.</p>
<p>First, make sure you have created the above <code>Host: *.wynton.ucsf.edu</code> directive in <code>~/.ssh/config</code> on your local computer and verified that it works. Then, append another directive with:</p>
<pre class="lang-none"><code>Host *dev?.wynton.ucsf.edu
  ProxyJump log2.wynton.ucsf.edu</code></pre>
<p>These two directives together will allow you to connect directly to a development host from your local machine, e.g.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">{local}$</span> ssh dev2.wynton.ucsf.edu</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="ex">[alice@dev2</span> ~]$ </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This works, because the <code>ProxyJump</code> specification makes the SSH connection use <code>log2.wynton.ucsf.edu</code> as a ‚Äújump host‚Äù and from there automatically continue to the requested development host. The result of this latter SSH configuration directive is the same as if you would have called <code>ssh -J log2.wynton.ucsf.edu dev2.wynton.ucsf.edu</code>.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/wynton\.ucsf\.edu\/hpc\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><a href="https://www.ucsf.edu/">UCSF</a> :: <a href="https://wynton.ucsf.edu/">Wynton</a> :: <a href="../../hpc/">Wynton HPC</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>
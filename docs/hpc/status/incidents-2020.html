<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>UCSF Wynton HPC Cluster</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="assets/css/this_site.css">
<link rel="stylesheet" href="assets/css/broadcast.css">
<link rel="stylesheet" href="assets/css/checkbox-toggle.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../assets/ico/favicon.ico" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">UCSF Wynton HPC Cluster</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../hpc/status/index.html"> 
<span class="menu-text">Status</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-get-started" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Get Started</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-get-started">    
        <li>
    <a class="dropdown-item" href="../../hpc/get-started/access-cluster.html">
 <span class="dropdown-text">1. Login &amp; Logout</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/get-started/development-prototyping.html">
 <span class="dropdown-text">2. Development / Prototyping</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/get-started/hello-world-job.html">
 <span class="dropdown-text">3. ‘Hello World’ Job</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/get-started/good-practices.html">
 <span class="dropdown-text">4. Good Practices</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/get-started/duo-signup.html">
 <span class="dropdown-text">5. 2FA Registration</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/get-started/protected-quickstart.html">
 <span class="dropdown-text">6. Wynton Protected Quickstart</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-software" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Software</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-software">    
        <li>
    <a class="dropdown-item" href="../../hpc/software/core-software.html">
 <span class="dropdown-text">Core Software</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/software/scl.html">
 <span class="dropdown-text">Software Collections (SCL)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/software/software-modules.html">
 <span class="dropdown-text">Software Modules</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/software/software-repositories.html">
 <span class="dropdown-text">Software Repositories</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/software/apptainer.html">
 <span class="dropdown-text">Linux Containers (Apptainer/Singularity)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/software/sbgrid.html">
 <span class="dropdown-text">SBGrid Software (restricted access)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/software/missing-software.html">
 <span class="dropdown-text">Missing Software?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/software/rocky-8-linux.html">
 <span class="dropdown-text">Migration to Rocky 8 Linux (Nov 2023)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-sge" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">SGE</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-sge">    
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/submit-jobs.html">
 <span class="dropdown-text">Submit Jobs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/list-jobs.html">
 <span class="dropdown-text">List Jobs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/kill-jobs.html">
 <span class="dropdown-text">Kill Jobs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/job-summary.html">
 <span class="dropdown-text">Job Summary</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/envvars.html">
 <span class="dropdown-text">Useful Env. Variables</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/using-local-scratch.html">
 <span class="dropdown-text">Use Local Scratch</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/queues.html">
 <span class="dropdown-text">Available Queues</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/email-notifications.html">
 <span class="dropdown-text">Job Email Notifications</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/gpu.html">
 <span class="dropdown-text">GPU Scheduling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/scheduler/advanced-usage.html">
 <span class="dropdown-text">Advanced Usage</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-file-transfers" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">File Transfers</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-file-transfers">    
        <li>
    <a class="dropdown-item" href="../../hpc/transfers/files-and-directories.html">
 <span class="dropdown-text">Secure Copy File Transfers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/transfers/globus.html">
 <span class="dropdown-text">Globus File Transfers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/transfers/globus-sharing.html">
 <span class="dropdown-text">Globus File Sharing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/transfers/ucsf-box.html">
 <span class="dropdown-text">UCSF Box</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/transfers/dos2unix.html">
 <span class="dropdown-text">Windows-Unix File Transfers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/transfers/rclone.html">
 <span class="dropdown-text">rclone (mount Wynton file system locally)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-how-to" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">How To</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-how-to">    
        <li>
    <a class="dropdown-item" href="../../hpc/howto/matlab.html">
 <span class="dropdown-text">Work with MATLAB</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/python.html">
 <span class="dropdown-text">Work with Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/jupyter.html">
 <span class="dropdown-text">Work with Jupyter Notebook</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/r.html">
 <span class="dropdown-text">Work with R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/rstudio.html">
 <span class="dropdown-text">Work with RStudio</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/conda.html">
 <span class="dropdown-text">Work with Conda</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/conda-stage.html">
 <span class="dropdown-text">Stage Conda Environment to Local Disk</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/install-from-source.html">
 <span class="dropdown-text">Install Software from Source</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/storage-size.html">
 <span class="dropdown-text">File Sizes and Disk Quotas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/group-quota.html">
 <span class="dropdown-text">Adjust Group Disk Quota</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/find-files.html">
 <span class="dropdown-text">Find Files</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/log-in-without-pwd.html">
 <span class="dropdown-text">Log in without Password</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/change-pwd.html">
 <span class="dropdown-text">Change &amp; Verify Password</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/gui-x11fwd.html">
 <span class="dropdown-text">GUIs (X2Go &amp; X11)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/howto/jupyterhub.html">
 <span class="dropdown-text">JupyterHub Server (DISCONTINUED)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-support" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Support</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-support">    
        <li>
    <a class="dropdown-item" href="../../hpc/support/index.html">
 <span class="dropdown-text">Support Channels</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/support/faq.html">
 <span class="dropdown-text">Frequently Asked Questions</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-about" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">About</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-about">    
        <li>
    <a class="dropdown-item" href="../../hpc/about/specs.html">
 <span class="dropdown-text">Specifications</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/about/gpus.html">
 <span class="dropdown-text">Available GPUs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/about/news.html">
 <span class="dropdown-text">News</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/about/pricing-storage.html">
 <span class="dropdown-text">Pricing: Extra Storage</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/about/pricing-compute.html">
 <span class="dropdown-text">Pricing: Extra Compute (CPU &amp; GPU)</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../../hpc/about/wynton-protected.html">
 <span class="dropdown-text">Wynton Protected (P3 Data)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/about/join.html">
 <span class="dropdown-text">Join ♡</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/about/shares.html">
 <span class="dropdown-text">Contributing Member Shares</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../../hpc/about/governance.html">
 <span class="dropdown-text">Governance</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/about/user-agreement.html">
 <span class="dropdown-text">User Agreement</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../hpc/about/citation.html">
 <span class="dropdown-text">How to Cite</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../../hpc/about/contact.html">
 <span class="dropdown-text">Contact</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#operational-summary-for-2020" id="toc-operational-summary-for-2020" class="nav-link active" data-scroll-target="#operational-summary-for-2020">Operational Summary for 2020</a></li>
  <li><a href="#december-8-17-2020" id="toc-december-8-17-2020" class="nav-link" data-scroll-target="#december-8-17-2020">December 8-17, 2020</a></li>
  <li><a href="#december-11-16-2020" id="toc-december-11-16-2020" class="nav-link" data-scroll-target="#december-11-16-2020">December 11-16, 2020</a></li>
  <li><a href="#december-11-2020" id="toc-december-11-2020" class="nav-link" data-scroll-target="#december-11-2020">December 11, 2020</a></li>
  <li><a href="#december-7-8-2020" id="toc-december-7-8-2020" class="nav-link" data-scroll-target="#december-7-8-2020">December 7-8, 2020</a></li>
  <li><a href="#november-4-16-2020" id="toc-november-4-16-2020" class="nav-link" data-scroll-target="#november-4-16-2020">November 4-16, 2020</a></li>
  <li><a href="#november-5-2020" id="toc-november-5-2020" class="nav-link" data-scroll-target="#november-5-2020">November 5, 2020</a></li>
  <li><a href="#october-21-2020" id="toc-october-21-2020" class="nav-link" data-scroll-target="#october-21-2020">October 21, 2020</a></li>
  <li><a href="#august-19-2020" id="toc-august-19-2020" class="nav-link" data-scroll-target="#august-19-2020">August 19, 2020</a></li>
  <li><a href="#august-10-13-2020" id="toc-august-10-13-2020" class="nav-link" data-scroll-target="#august-10-13-2020">August 10-13, 2020</a></li>
  <li><a href="#july-6-2020" id="toc-july-6-2020" class="nav-link" data-scroll-target="#july-6-2020">July 6, 2020</a></li>
  <li><a href="#july-5-2020" id="toc-july-5-2020" class="nav-link" data-scroll-target="#july-5-2020">July 5, 2020</a></li>
  <li><a href="#june-11-26-2020" id="toc-june-11-26-2020" class="nav-link" data-scroll-target="#june-11-26-2020">June 11-26, 2020</a></li>
  <li><a href="#june-5-9-2020" id="toc-june-5-9-2020" class="nav-link" data-scroll-target="#june-5-9-2020">June 5-9, 2020</a></li>
  <li><a href="#may-18-22-2020" id="toc-may-18-22-2020" class="nav-link" data-scroll-target="#may-18-22-2020">May 18-22, 2020</a></li>
  <li><a href="#may-28-29-2020" id="toc-may-28-29-2020" class="nav-link" data-scroll-target="#may-28-29-2020">May 28-29, 2020</a></li>
  <li><a href="#february-5-7-2020" id="toc-february-5-7-2020" class="nav-link" data-scroll-target="#february-5-7-2020">February 5-7, 2020</a></li>
  <li><a href="#january-29-2020" id="toc-january-29-2020" class="nav-link" data-scroll-target="#january-29-2020">January 29, 2020</a></li>
  <li><a href="#january-22-2020" id="toc-january-22-2020" class="nav-link" data-scroll-target="#january-22-2020">January 22, 2020</a></li>
  <li><a href="#december-20-2019---january-4-2020" id="toc-december-20-2019---january-4-2020" class="nav-link" data-scroll-target="#december-20-2019---january-4-2020">December 20, 2019 - January 4, 2020</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/ucsf-wynton/wynton-website-hpc/edit/main/hpc/status/incidents-2020.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/ucsf-wynton/wynton-website-hpc/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="operational-summary-for-2020" class="level3">
<h3 class="anchored" data-anchor-id="operational-summary-for-2020">Operational Summary for 2020</h3>
<ul>
<li><p>Full downtime:</p>
<ul>
<li>Scheduled: 123 hours = 5.1 days = 1.4%</li>
<li>Unscheduled: 91.5 hours = 3.8 days = 1.0%</li>
<li>Total: 214.5 hours = 8.9 days = 2.4%</li>
<li>External factors: 12% of the above downtime, corresponding to 26.5 hours (=1.1 days), were due to external factors</li>
</ul></li>
</ul>
<section id="scheduled-maintenance-downtimes" class="level4">
<h4 class="anchored" data-anchor-id="scheduled-maintenance-downtimes">Scheduled maintenance downtimes</h4>
<ul>
<li>Impact: No file access, no compute resources available</li>
<li>Damage: None</li>
<li>Occurrences:
<ol type="1">
<li>2020-08-10 (93 hours)</li>
<li>2020-12-07 (30 hours)</li>
</ol></li>
<li>Total downtime: 123 hours</li>
</ul>
</section>
<section id="scheduled-kernel-maintenance" class="level4">
<h4 class="anchored" data-anchor-id="scheduled-kernel-maintenance">Scheduled kernel maintenance</h4>
<ul>
<li>Impact: Fewer compute nodes than usual until rebooted</li>
<li>Damage: None</li>
<li>Occurrences:
<ol type="1">
<li>2020-06-11 (up to 14 days)</li>
<li>2020-12-11 (up to 14 days)</li>
</ol></li>
</ul>
</section>
<section id="unscheduled-downtimes-due-to-power-outage" class="level4">
<h4 class="anchored" data-anchor-id="unscheduled-downtimes-due-to-power-outage">Unscheduled downtimes due to power outage</h4>
<ul>
<li>Impact: No file access, no compute resources available</li>
<li>Damage: Running jobs (&lt;= 14 days) failed, file-transfers failed, possible file corruptions</li>
<li>Occurrences:
<ul>
<li>None</li>
</ul></li>
<li>Total downtime: 0 hours</li>
</ul>
</section>
<section id="unscheduled-downtimes-due-to-file-system-failures" class="level4">
<h4 class="anchored" data-anchor-id="unscheduled-downtimes-due-to-file-system-failures">Unscheduled downtimes due to file-system failures</h4>
<ul>
<li>Impact: No file access</li>
<li>Damage: Running jobs (&lt;= 14 days) may have failed, file-transfers may have failed, cluster not accessible</li>
<li>Occurrences:
<ol type="1">
<li>2020-01-22 (2.5 hours) - BeeGFS failure to failed upgrade</li>
<li>2020-01-29 (1.0 hours) - BeeGFS non-responsive</li>
<li>2020-02-05 (51.5 hours) - Legacy NetApp file system failed</li>
<li>2020-05-22 (0.5 hours) - BeeGFS non-responsive to failed upgrade</li>
<li>2020-08-19 (1.5 hours) - BeeGFS non-responsive</li>
<li>2020-10-21 (3 hours) - BeeGFS non-responsive</li>
<li>2020-11-05 (3 hours) - BeeGFS non-responsive</li>
</ol></li>
<li>Total downtime: 63.0 hours</li>
</ul>
</section>
<section id="unscheduled-downtimes-due-to-other-reasons" class="level4">
<h4 class="anchored" data-anchor-id="unscheduled-downtimes-due-to-other-reasons">Unscheduled downtimes due to other reasons</h4>
<ul>
<li>Impact: Less compute resources</li>
<li>Damage: Running jobs (&lt;= 14 days) may have failed, file-transfers may have failed, cluster not accessible</li>
<li>Occurrences:
<ol type="1">
<li>2020-05-28 (26.5 hours) - MSG Data Center outage affecting many GPU compute nodes</li>
<li>2020-07-04 (2 hours) - SGE scheduler failed</li>
<li>2020-11-04 (288 hours) - ~80 compute nodes lost due to network switch failure</li>
</ol></li>
<li>Total downtime: 28.5 hours of which 26.5 hours were due to external factors</li>
</ul>
</section>
<section id="accounts" class="level4">
<h4 class="anchored" data-anchor-id="accounts">Accounts</h4>
<ul>
<li>Number of user account: 864 (change: +386 during the year)</li>
</ul>
</section>
</section>
<section id="december-8-17-2020" class="level3">
<h3 class="anchored" data-anchor-id="december-8-17-2020">December 8-17, 2020</h3>
<section id="limited-accessibility-of-login-node-log1" class="level4">
<h4 class="anchored" data-anchor-id="limited-accessibility-of-login-node-log1"><span style="color: orange;">Limited accessibility of Login node log1</span></h4>
<p><strong>Resolved</strong>: Login node ‘log1.wynton.ucsf.edu’ can again be accessed from outside of the UCSF network. <br><span class="timestamp">December 17, 14:20 PT</span></p>
<p><strong>Notice</strong>: Login node ‘log1.wynton.ucsf.edu’ is only accessible from within UCSF network. This is a side effect of the recent network upgrades. We are waiting for The UCSF IT Network to resolve this for us. Until resolved, please use the alternative ‘log2.wynton.ucsf.edu’ login node when connecting from outside of the UCSF network. <br><span class="timestamp">December 8, 23:00 PT</span></p>
</section>
</section>
<section id="december-11-16-2020" class="level3">
<h3 class="anchored" data-anchor-id="december-11-16-2020">December 11-16, 2020</h3>
<section id="rebooting-compute-nodes" class="level4">
<h4 class="anchored" data-anchor-id="rebooting-compute-nodes"><span style="color: orange;">Rebooting compute nodes</span></h4>
<p><strong>Resolved</strong>: All compute nodes have been rebooted. <br><span class="timestamp">December 16, 05:00 PT</span></p>
<p><strong>Notice</strong>: The new BeeGFS setting introduced during the upgrades earlier this week caused problems throughout the system and we need to roll them back. The compute nodes will no longer take on new jobs until they have been rebooted. A compute node will be automatically rebooted as soon as all of its running jobs have completed. Unfortunately, we have to kill jobs that run on compute nodes that are stalled and suffer from the BeeGFS issues. <br><span class="timestamp">December 11, 13:50 PT</span></p>
</section>
</section>
<section id="december-11-2020" class="level3">
<h3 class="anchored" data-anchor-id="december-11-2020">December 11, 2020</h3>
<section id="rebooting-login-and-development-nodes" class="level4">
<h4 class="anchored" data-anchor-id="rebooting-login-and-development-nodes"><span style="color: orange;">Rebooting login and development nodes</span></h4>
<p><strong>Resolved</strong>: All login and development nodes have been rebooted. <br><span class="timestamp">December 12, 17:00 PT</span></p>
<p><strong>Notice</strong>: Login node ‘log1.wynton.ucsf.edu’ and all the development nodes will be rebooted at 4:30 PM today Friday. This is needed in order to roll back the new BeeGFS setting introduced during the upgrades earlier this week. <br><span class="timestamp">December 11, 13:50 PT</span></p>
</section>
</section>
<section id="december-7-8-2020" class="level3">
<h3 class="anchored" data-anchor-id="december-7-8-2020">December 7-8, 2020</h3>
<section id="major-upgrades-full-downtime" class="level4">
<h4 class="anchored" data-anchor-id="major-upgrades-full-downtime"><span style="color: orange;">Major upgrades (full downtime)</span></h4>
<p><strong>Resolved</strong>: The upgrade has been completed. The cluster back online, including all of the login, data-transfer, and development nodes, as well as the majority of the compute nodes. The scheduler is processing jobs again. All hosts now run CentOS 7.9. <br><span class="timestamp">December 8, 16:30 PT</span></p>
<p><strong>Update</strong>: The upgrade is paused and will resume tomorrow. We hope to be bring all of the cluster back online by the end of tomorrow. For now, login node ‘log2’ (but not ‘log1’), and data-transfer nodes ‘dt1’, and ‘dt2’ are back online and can be used for accessing files. Development nodes ‘dev1’ and ‘dev3’ are also available (please make sure to leave room for others). The scheduler remains down, i.e.&nbsp;it is is not be possible to submit jobs. <br><span class="timestamp">December 7, 17:00 PT</span></p>
<p><strong>Update</strong>: The upgrades have started. Access to Wynton HPC has been disable as of 10:30 this morning. The schedulers stopped launching queued jobs as of 23:30 last night. <br><span class="timestamp">December 7, 10:30 PT</span></p>
<p><strong>Revised notice</strong>: We have decided to hold back on upgrading BeeGFS during the downtime and only focus on the remain parts including operating system and network upgrades. The scope of the work is still non-trivial. There is a risk that the downtime will extend into Thursday December 10. However, if everything go smoothly, we hope that Wynton HPC will be back up by the end of Monday or during the Tuesday. There will only be one continuous downtime, that is, when the cluster comes back up, it will stay up. <br><span class="timestamp">December 3, 09:00 PT</span></p>
<p><strong>Notice</strong>: Starting early Monday December 7, the cluster will be powered down entirely for maintenance and upgrades, which includes upgrading the operating system, the network, and the BeeGFS file system. We anticipate that the cluster will be available again by the end of Tuesday December 8, when load testing of the upgraded BeeGFS file system will start. If these tests fail, we will have to unroll the BeeGFS upgrade, which in case we anticipate that the cluster is back online by the end of Wednesday December 9. <br><span class="timestamp">November 23, 16:50 PT</span></p>
<!--
start: 2020-12-07T10:30:00
stop: 2020-12-08T16:30:00
length: 30 hours
severity: under-maintenance
affected: jobs, beegfs, compute, *
reason: scheduled
 -->
</section>
</section>
<section id="november-4-16-2020" class="level3">
<h3 class="anchored" data-anchor-id="november-4-16-2020">November 4-16, 2020</h3>
<section id="compute-nodes-not-serving-jobs-due-to-network-switch-failure" class="level4">
<h4 class="anchored" data-anchor-id="compute-nodes-not-serving-jobs-due-to-network-switch-failure"><span style="color: orange;">Compute nodes not serving jobs (due to network switch failure)</span></h4>
<p><strong>Resolved</strong>: All 74 compute nodes that were taken off the job scheduler on 2020-11-04 are back up and running <br><span class="timestamp">November 16, 12:00 PT</span></p>
<p><strong>Notice</strong>: 74 compute nodes, including several GPU nodes, were taken off the job scheduler around 14:00 on 2020-11-04 due to a faulty network switch. The network switch needs to be replaced in order to resolve this. <br><span class="timestamp">November 4, 16:10 PT</span></p>
<!--
start: 2020-11-04T16:50:00
stop: 2020-11-16T16:30:00
length: 360 hours
severity: partial-outage
affected: jobs, network, compute, ...
reason: external
 -->
</section>
</section>
<section id="november-5-2020" class="level3">
<h3 class="anchored" data-anchor-id="november-5-2020">November 5, 2020</h3>
<section id="cluster-inaccessible-due-to-beegfs-issues" class="level4">
<h4 class="anchored" data-anchor-id="cluster-inaccessible-due-to-beegfs-issues"><span style="color: orange;">Cluster inaccessible (due to BeeGFS issues)</span></h4>
<p><strong>Resolved</strong>: Our BeeGFS file system was non-responsive during 01:20-04:00 on 2020-11-05 because one of the meta servers hung. <br><span class="timestamp">November 5, 08:55 PT</span></p>
<!--
start: 2020-11-05T01:20:00
stop: 2020-11-05T04:00:00
length: 3 hours
severity: major-outage
affected: jobs, beegfs, ...
reason: internal
 -->
</section>
</section>
<section id="october-21-2020" class="level3">
<h3 class="anchored" data-anchor-id="october-21-2020">October 21, 2020</h3>
<section id="cluster-inaccessible-due-to-beegfs-issues-1" class="level4">
<h4 class="anchored" data-anchor-id="cluster-inaccessible-due-to-beegfs-issues-1"><span style="color: orange;">Cluster inaccessible (due to BeeGFS issues)</span></h4>
<p><strong>Resolved</strong>: Our BeeGFS file system was non-responsive because one of its meta servers hung, which now has been restarted. <br><span class="timestamp">October 21, 11:15 PT</span></p>
<p><strong>Notice</strong>: The cluster is currently inaccessible for unknown reasons. The problem was first reported around 09:30 today. <br><span class="timestamp">October 21, 10:45 PT</span></p>
<!--
start: 2020-10-21T09:30:00
stop: 2020-10-21T11:15:00
length: 3.0 hours
severity: major-outage
affected: jobs, beegfs, ...
reason: internal
 -->
</section>
</section>
<section id="august-19-2020" class="level3">
<h3 class="anchored" data-anchor-id="august-19-2020">August 19, 2020</h3>
<section id="cluster-inaccessible-due-to-beegfs-issues-2" class="level4">
<h4 class="anchored" data-anchor-id="cluster-inaccessible-due-to-beegfs-issues-2"><span style="color: orange;">Cluster inaccessible (due to BeeGFS issues)</span></h4>
<p><strong>Resolved</strong>: Our BeeGFS file system was non-responsive between 17:22 and 18:52 today because one of its meta servers hung while the other attempted to synchronize to it. <br><span class="timestamp">August 19, 19:00 PT</span></p>
<p><strong>Notice</strong>: The cluster is currently inaccessible for unknown reasons. The problem was first reported around 17:30 today. <br><span class="timestamp">August 19, 18:15 PT</span></p>
<!--
start: 2020-08-19T17:22:00
stop: 2020-08-19T18:52:00
length: 1.5 hours
severity: major-outage
affected: jobs, beegfs, ...
reason: internal
 -->
</section>
</section>
<section id="august-10-13-2020" class="level3">
<h3 class="anchored" data-anchor-id="august-10-13-2020">August 10-13, 2020</h3>
<section id="network-and-hardware-upgrades-full-downtime" class="level4">
<h4 class="anchored" data-anchor-id="network-and-hardware-upgrades-full-downtime"><span style="color: orange;">Network and hardware upgrades (full downtime)</span></h4>
<p><strong>Resolved</strong>: The cluster is fully back up and running. Several compute nodes still need to be rebooted but we consider this upgrade cycle completed. The network upgrade took longer than expected, which delayed the processes. We hope to bring the new lab storage online during the next week. <br><span class="timestamp">August 13, 21:00 PT</span></p>
<p><strong>Update</strong>: All login, data-transfer, and development nodes are online. Additional compute nodes are being upgraded and are soon part of the pool serving jobs. <br><span class="timestamp">August 13, 14:50 PT</span></p>
<p><strong>Update</strong>: Login node log1, data-transfer node dt2, and the development nodes are available again. Compute nodes are going through an upgrade cycle and will soon start serving jobs again. The upgrade work is taking longer than expected and will continue tomorrow Thursday August 13. <br><span class="timestamp">August 12, 16:10 PT</span></p>
<p><strong>Notice</strong>: All of the Wynton HPC environment is down for maintenance and upgrades. <br><span class="timestamp">August 10, 00:00 PT</span></p>
<p><strong>Notice</strong>: Starting early Monday August 10, the cluster will be powered down entirely for maintenance and upgrades, which includes upgrading the network and adding lab storage purchased by several groups. We anticipate that the cluster will be available again by the end of Wednesday August 12. <br><span class="timestamp">July 24, 15:45 PT</span></p>
<!--
start: 2020-08-10T00:00:00
stop: 2020-08-13T21:00:00
length: 93 hours
severity: under-maintenance
affected: jobs, beegfs, compute, *
reason: scheduled
 -->
</section>
</section>
<section id="july-6-2020" class="level3">
<h3 class="anchored" data-anchor-id="july-6-2020">July 6, 2020</h3>
<section id="development-node-failures" class="level4">
<h4 class="anchored" data-anchor-id="development-node-failures"><span style="color: orange;">Development node failures</span></h4>
<p><strong>Resolved</strong>: All three development nodes have been rebooted. <br><span class="timestamp">July 6, 15:20 PT</span></p>
<p><strong>Notice</strong>: The three regular development nodes have all gotten themselves hung up on one particular process. This affects basic system operations and preventing such basic commands as <code>ps</code> and <code>w</code>. To clear this state, we’ll be doing an emergency reboot of the dev nodes at about 15:15. <br><span class="timestamp">July 6, 15:05 PT</span></p>
</section>
</section>
<section id="july-5-2020" class="level3">
<h3 class="anchored" data-anchor-id="july-5-2020">July 5, 2020</h3>
<section id="job-scheduler-non-working" class="level4">
<h4 class="anchored" data-anchor-id="job-scheduler-non-working"><span style="color: orange;">Job scheduler non-working</span></h4>
<p><strong>Resolved</strong>: The SGE scheduler produced errors when queried or when jobs were submitted or launched. The problem started 00:30 and lasted until 02:45 early Sunday 2020-07-05. <br><span class="timestamp">July 6, 22:00 PT</span></p>
<!--
start: 2020-07-06T00:30:00
stop: 2020-07-06T02:45:00
length: 2.0 hours
severity: partial-outage
affected: jobs, scheduler
reason: internal
 -->
</section>
</section>
<section id="june-11-26-2020" class="level3">
<h3 class="anchored" data-anchor-id="june-11-26-2020">June 11-26, 2020</h3>
<section id="kernel-maintenance" class="level4">
<h4 class="anchored" data-anchor-id="kernel-maintenance"><span style="color: orange;">Kernel maintenance</span></h4>
<p><strong>Resolved</strong>: All compute nodes have been rebooted. <br><span class="timestamp">June 26, 10:45 PT</span></p>
<p><strong>Update</strong>: Development node dev3 is back online. <br><span class="timestamp">June 15, 11:15 PT</span></p>
<p><strong>Update</strong>: Development node dev3 is not available. It failed to reboot and requires on-site attention, which might not be possible for several days. All other log-in, data-transfer, and development nodes were rebooted successfully. <br><span class="timestamp">June 11, 15:45 PT</span></p>
<p><strong>Notice</strong>: New operating-system kernels are deployed. Compute nodes will no longer accept new jobs until they have been rebooted. A node will be rebooted as soon as any existing jobs have completed, which may take up to two weeks (maximum runtime). During this update period, there will be fewer than usual slots available on the queues. To follow the progress, see the green ‘Available CPU cores’ curve (target ~10,400 cores) in the graph above. Log-in, data-transfer, and development nodes will be rebooted at 15:30 on Thursday June 11. <br><span class="timestamp">June 11, 10:45 PT</span></p>
</section>
</section>
<section id="june-5-9-2020" class="level3">
<h3 class="anchored" data-anchor-id="june-5-9-2020">June 5-9, 2020</h3>
<section id="no-internet-access-on-development-nodes" class="level4">
<h4 class="anchored" data-anchor-id="no-internet-access-on-development-nodes"><span style="color: orange;">No internet access on development nodes</span></h4>
<p><strong>Resolved</strong>: Internet access from the development nodes is available again. A new web-proxy server had to be built and deploy. <br><span class="timestamp">June 9, 09:15 PT</span></p>
<p><strong>Notice</strong>: Internet access from the development nodes is not available. This is because the proxy server providing them with internet access had a critical hardware failure around 08-09 this morning. At the most, we cannot provide an estimate when we get to restore this server. <br><span class="timestamp">June 5, 16:45 PT</span></p>
</section>
</section>
<section id="may-18-22-2020" class="level3">
<h3 class="anchored" data-anchor-id="may-18-22-2020">May 18-22, 2020</h3>
<section id="file-system-maintenance" class="level4">
<h4 class="anchored" data-anchor-id="file-system-maintenance"><span style="color: orange;">File-system maintenance</span></h4>
<p><strong>Update</strong>: The upgrade of the BeeGFS filesystem introduced new issues. We decided to rollback the upgrade and we are working with the vendor. There is no upgrade planned for the near term. <br><span class="timestamp">June 8, 09:00 PT</span></p>
<p><strong>Update</strong>: The BeeGFS filesystem has been upgraded using a patch from the vendor. The patch was designed to lower the amount of resynchronization needed between the two metadata servers. Unfortunately, after the upgrade we observe an increase of resynchronization. We will keep monitoring the status. If the problem remains, we will consider a rollback to the BeeGFS version used prior to May 18. <br><span class="timestamp">May 22, 01:25 PT</span></p>
<p><strong>Update</strong>: For a short moment around 01:00 early Friday, both of our BeeGFS metadata servers were down. This may have lead to some applications experiencing I/O errors around this time. <br><span class="timestamp">May 22, 01:25 PT</span></p>
<p><strong>Notice</strong>: Work to improve the stability of the BeeGFS filesystem (<code>/wynton</code>) will be conducted during the week of May 18-22. This involves restarting the eight pairs of metadata server processes, which may result in several brief stalls of the file system. Each should last less than 5 minutes and operations will continue normally after each one. <br><span class="timestamp">May 6, 15:10 PT</span></p>
<!--
start: 2020-05-22T01:00:00
stop: 2020-05-22T01:15:00
length: 0.5 hours
severity: partial-outage
affected: jobs, beegfs
reason: internal
 -->
</section>
</section>
<section id="may-28-29-2020" class="level3">
<h3 class="anchored" data-anchor-id="may-28-29-2020">May 28-29, 2020</h3>
<section id="gpu-compute-nodes-outage" class="level4">
<h4 class="anchored" data-anchor-id="gpu-compute-nodes-outage"><span style="color: orange;">GPU compute nodes outage</span></h4>
<p><strong>Resolved</strong>: The GPU compute nodes are now fully available to serve jobs. <br><span class="timestamp">May 29, 12:00 PT</span></p>
<p><strong>Update</strong>: The GPU compute nodes that went down yesterday have been rebooted. <br><span class="timestamp">May 29, 11:10 PT</span></p>
<p><strong>Investigating</strong>: A large number of GPU compute nodes in the MSG data center are currently down for unknown reasons. We are investigating the cause. <br><span class="timestamp">May 28, 09:35 PT</span></p>
<!--
start: 2020-05-28T09:35:00
stop: 2020-05-29T12:00:00
length: 26.5 hours
severity: partial-outage
affected: jobs, compute-gpu
reason: internal
 -->
</section>
</section>
<section id="february-5-7-2020" class="level3">
<h3 class="anchored" data-anchor-id="february-5-7-2020">February 5-7, 2020</h3>
<section id="major-outage-due-to-netapp-file-system-failure" class="level4">
<h4 class="anchored" data-anchor-id="major-outage-due-to-netapp-file-system-failure"><span style="color: orange;">Major outage due to NetApp file-system failure</span></h4>
<p><strong>Resolved</strong>: The Wynton HPC system is considered fully functional again. The legacy, deprecated NetApp storage was lost. <br><span class="timestamp">February 10, 10:55 PT</span></p>
<p><strong>Update</strong>: The majority of the compute nodes have been rebooted and are now online and running jobs. We will actively monitor the system and assess the how everything works before we considered this incident resolved. <br><span class="timestamp">February 7, 13:40 PT</span></p>
<p><strong>Update</strong>: The login, development and data transfer nodes will be rebooted at 01:00 today Friday February 7. <br><span class="timestamp">February 7, 12:00 PT</span></p>
<p><strong>Update</strong>: The failed legacy NetApp server is the cause to the problems, e.g.&nbsp;compute nodes not being responsive causing problems for SGE etc. Because of this, <strong>all of the cluster - login, development, transfer, and computes nodes - will be rebooted tomorrow Friday 2020-02-07</strong>. <br><span class="timestamp">February 6, 10:00 PT</span></p>
<p><strong>Notice</strong>: Wynton HPC is experience major issues due to NetApp file-system failure, despite this is being deprecated and not used much these days. The first user report on this came in around 09:00 and the job-queue logs suggests the problem began around 02:00. It will take a while for everything to come back up and there will be brief BeeGFS outage while we reboot the BeeGFS management node. <br><span class="timestamp">February 5, 10:15 PT</span></p>
<!--
start: 2020-02-05T10:15:00
stop: 2020-02-07T13:40:00
length: 51.5 hours
severity: major-outage
affected: jobs, compute, ...
reason: internal
 -->
</section>
</section>
<section id="january-29-2020" class="level3">
<h3 class="anchored" data-anchor-id="january-29-2020">January 29, 2020</h3>
<section id="beegfs-failure" class="level4">
<h4 class="anchored" data-anchor-id="beegfs-failure"><span style="color: orange;">BeeGFS failure</span></h4>
<p><strong>Resolved</strong>: The BeeGFS file-system issue has been resolved by rebooting two meta servers. <br><span class="timestamp">January 29, 17:00 PT</span></p>
<p><strong>Notice</strong>: There’s currently an issue with the BeeGFS file system. Users reporting that they cannot log in. <br><span class="timestamp">January 29, 16:00 PT</span></p>
<!--
start: 2020-01-29T16:00:00
stop: 2020-01-29T17:00:00
length: 1.0 hours
severity: major-outage
affected: jobs, beegfs, ...
reason: internal
 -->
</section>
</section>
<section id="january-22-2020" class="level3">
<h3 class="anchored" data-anchor-id="january-22-2020">January 22, 2020</h3>
<section id="file-system-maintenance-1" class="level4">
<h4 class="anchored" data-anchor-id="file-system-maintenance-1"><span style="color: orange;">File-system maintenance</span></h4>
<p><strong>Resolved</strong>: The BeeGFS upgrade issue has been resolved. <br><span class="timestamp">Jan 22, 14:30 PT</span></p>
<p><strong>Update</strong>: The planned upgrade caused unexpected problems to the BeeGFS file system resulting in <code>/wynton/group</code> becoming unstable. <br><span class="timestamp">Jan 22, 13:35 PT</span></p>
<p><strong>Notice</strong>: One of the BeeGFS servers, which serve our cluster-wide file system, will be swapped out starting at noon (11:59am) on Wednesday January 22, 2020 and the work is expected to last one hour. We don’t anticipate any downtime because the BeeGFS servers are mirrored for availability. <br><span class="timestamp">Jan 16, 14:40 PT</span></p>
<!--
start: 2020-01-22T12:00:00
stop: 2020-01-22T14:30:00
length: 2.5 hours
severity: under-maintenance
affected: jobs, beegfs, *
reason: scheduled
 -->
</section>
</section>
<section id="december-20-2019---january-4-2020" class="level3">
<h3 class="anchored" data-anchor-id="december-20-2019---january-4-2020">December 20, 2019 - January 4, 2020</h3>
<section id="kernel-maintenance-1" class="level4">
<h4 class="anchored" data-anchor-id="kernel-maintenance-1"><span style="color: orange;">Kernel maintenance</span></h4>
<p><strong>Resolved</strong>: All compute nodes have been updated and rebooted. <br><span class="timestamp">Jan 4, 11:00 PT</span></p>
<p><strong>Notice</strong>: Compute nodes will no longer accept new jobs until they have been rebooted. A node will be rebooted as soon as any existing jobs have completed, which may take up to two weeks (maximum runtime). During this update period, there will be fewer available slots on the queues than usual. To follow the progress, see the green ‘Available CPU cores’ curve (target ~7,500 cores) in the graph above. Log-in, data-transfer, and development nodes will be rebooted at 15:30 on Friday December 20. GPU nodes already run the new kernel and are not affected. <br><span class="timestamp">December 20, 10:20 PT</span></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/wynton\.ucsf\.edu\/hpc\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><a href="https://www.ucsf.edu/">UCSF</a> :: <a href="https://wynton.ucsf.edu/">Wynton</a> :: <a href="../../hpc/">Wynton HPC</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/ucsf-wynton/wynton-website-hpc/edit/main/hpc/status/incidents-2020.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/ucsf-wynton/wynton-website-hpc/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>&lt;a href=“<strong>?meta:repo-url</strong>/commits/master/docs/<strong>?meta:source-file</strong>”&gt;Change log :: &lt;a href=“<strong>?meta:repo-url</strong>/tree/master/docs/<strong>?meta:source-file</strong>”&gt;Contribute</p>
</div>
  </div>
</footer>




</body></html>